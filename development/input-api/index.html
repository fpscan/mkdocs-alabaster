
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Input API &mdash; Alabaster</title>

    <link rel="shortcut icon" href="../../img/favicon.ico">
    <link rel="stylesheet" href="../../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../../css/alabaster-overrides.css" type="text/css">

    

    
      <script src="../../search/main.js"></script>
    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <h1 id="libretro-input-api">Libretro Input API<a class="headerlink" href="#libretro-input-api" title="Permanent link">¶</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">¶</a></h2>
<p>Libretro's input system is based on abstracted input device types:</p>
<ul>
<li>RetroPad<ul>
<li>Digitial Joypad</li>
<li>Analog and Digital Joypad</li>
</ul>
</li>
<li>Mouse</li>
<li>Pointer</li>
<li>Keyboard</li>
<li>Lightgun</li>
</ul>
<h2 id="retropad">RetroPad<a class="headerlink" href="#retropad" title="Permanent link">¶</a></h2>
<p>The <strong>RetroPad</strong> is a joypad abstraction interface defined by the Libretro API. It is the primary input device for a libretro frontend. Unless a core absolutely requires the use of a keyboard with no possible fallback for gamepad-type controls, a [[Libretro core]] should always be implemented as such that it is directly controllable by the RetroPad.</p>
<p><img alt="RetroPad Conceptual Diagram" src="../../image/guides/retropad-conceptual-diagram.png" /></p>
<p>In terms of button layout and functionality, the RetroPad is based on a PlayStation/Super Nintendo joypad.</p>
<h3 id="specification">Specification<a class="headerlink" href="#specification" title="Permanent link">¶</a></h3>
<p>The minimum implementation required for the RetroPad abstraction:</p>
<ul>
<li>At least two shoulder buttons</li>
<li>At least four face buttons</li>
<li>At least one D-pad</li>
<li>At least one analogue stick</li>
<li>A <code>Start</code> button and a <code>Select</code>/<code>Back</code> button.</li>
</ul>
<p><img alt="Mega Drive 6-Button Gamepad" src="../../image/controller/md6.png" />
Above: An example of the RetroPad joypad abstraction mapped to the Megadrive 6-Button gamepad.</p>
<h3 id="digital-retropad">Digital RetroPad<a class="headerlink" href="#digital-retropad" title="Permanent link">¶</a></h3>
<p>A RetroPad abstraction with all digital controls can be used. The conceptual arrangement for the buttons for the RetroPad is inspired by the Super Nintendo controller and the Sony Playstation DualShock.</p>
<h3 id="analog-retropad">Analog RetroPad<a class="headerlink" href="#analog-retropad" title="Permanent link">¶</a></h3>
<p>A RetroPad abstraction with one or more analog inputs can be used. Conceptually inspired by the Sony DualShock2, this adds two analog sticks to the digital RetroPad and allows all buttons to return analog values in the range of <code>[-0x7fff, 0x7fff]</code>, although some devices may return <code>-0x8000</code>. Positive X axis is right. Positive Y axis is down. Buttons are returned in the range <code>[0, 0x7fff]</code>.</p>
<h2 id="mouse-input">Mouse Input<a class="headerlink" href="#mouse-input" title="Permanent link">¶</a></h2>
<p>X and Y coordinates are reported relatively to last poll (poll callback) and it is up to the core to keep track of where the pointer coordinates with respect to the display.</p>
<h2 id="pointer-input">Pointer Input<a class="headerlink" href="#pointer-input" title="Permanent link">¶</a></h2>
<p>The pointer abstraction represents pen, stylus, touch and other input devices that use absolute coordinates with respect to the screen.</p>
<p>Coordinates in X and Y are reported as <code>[-0x7fff, 0x7fff]</code>: <code>-0x7fff</code> corresponds to the far left/top of the screen, <code>0x7fff</code> to the far right/bottom of the screen. The "screen" is defined as area that is passed to the frontend and later displayed on the monitor. The frontend is free to scale/resize this screen as it sees fit but <code>(X, Y) = (-0x7fff, -0x7fff)</code> will always correspond to the top-left pixel of the display. </p>
<h2 id="keyboard-input">Keyboard Input<a class="headerlink" href="#keyboard-input" title="Permanent link">¶</a></h2>
<p>The libretro API allows a core to poll the frontend for the raw current pressed state of keys. There is also a callback available which is called by the frontend in response to keyboard events. <code>down</code> is set if the key is being pressed and <code>false</code> if it is being released.</p>
<p>Even though the frontend should try to synchronize keypresses with keycode events, cores should assume that multiple characters can be generated from a single keypress. In other words, keycode events should be treated separately from character events. Similarily if only a keycode event is generated with no corresponding character, the character should be <code>0</code>.</p>
<h2 id="lightgun-input">Lightgun Input<a class="headerlink" href="#lightgun-input" title="Permanent link">¶</a></h2>
<p>The libretro lightgun abstraction reports X/Y coordinates in screen space (similar to the pointer) in the range <code>[-0x8000, 0x7fff]</code> in both axes, with zero being center and <code>-0x8000</code> being out of bounds. The core an query the on/off screen state of the lightgun. It features a trigger, start/select buttons, auxiliary action buttons and a directional pad. A forced off-screen shot can be requested for
 auto-reloading function in some games.</p>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
          
            
  <p class="logo">
    <a href="../..">
      <img class="logo" src="../../logo.png" title="Alabaster">
    </a>
  </p>
  



          
            



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
      <li><a href="#overview">Overview</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#retropad">RetroPad</a></li>
      <ul>
    
      <li><a href="#specification">Specification</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#digital-retropad">Digital RetroPad</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#analog-retropad">Analog RetroPad</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
      <li><a href="#mouse-input">Mouse Input</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#pointer-input">Pointer Input</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#keyboard-input">Keyboard Input</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#lightgun-input">Lightgun Input</a></li>
      <ul>
    
  </ul>
    
  </ul>
  

  
    <hr>
    <ul>
      
        <li class="toctree-l1"><a href="https://github.com/notpushkin/mkdocs-alabaster">Fork me on GitHub</a></li>
      
    </ul>
  
</nav>
          
            
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../bounties/" title="previous chapter">
        Open Source Bounties
      </a></li>
    
    
      <li>Next: <a href="../coding-standards/" title="next chapter">
        Coding Standards
      </a></li>
    
  </ul>

          
            <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
          
        
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
        &copy; 2019 Alexander Pushkov
      
      
        |
        Powered by <a href="http://www.mkdocs.org">mkdocs 1.1</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">mkdocs-alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 1.1
  Docs Build Date UTC : 2020-05-14 06:50:08
  -->
</body>
</html>