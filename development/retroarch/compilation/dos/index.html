
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>DOS &mdash; Alabaster</title>

    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <link rel="stylesheet" href="../../../../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../../../../css/alabaster-overrides.css" type="text/css">

    

    
      <script src="../../../../search/main.js"></script>
    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <h1 id="dos-compilation-development-guide">DOS Compilation / Development Guide<a class="headerlink" href="#dos-compilation-development-guide" title="Permanent link">¶</a></h1>
<h2 id="environment-configuration">Environment configuration<a class="headerlink" href="#environment-configuration" title="Permanent link">¶</a></h2>
<p>This guide will use cross-compilation from Linux to build a DOS executable with the <a href="http://www.delorie.com/djgpp/">DJGPP</a> toolchain.</p>
<p>Most Linux distributions do not include this toolchain, but prebuilt binaries can be obtained <a href="https://github.com/andrewwutw/build-djgpp/releases">here</a>, or if you are using Arch Linux, you can use the AUR package <a href="https://aur.archlinux.org/packages/djgpp-gcc/">djgpp-gcc</a> to build it easily.</p>
<p>DJGPP builds 32-bit programs, which means an 80386 or higher processor is required. 80286 is not supported.</p>
<h2 id="core-support">Core Support<a class="headerlink" href="#core-support" title="Permanent link">¶</a></h2>
<p>!!! Note
    RetroArch on DOS is statically linked. With statically linked RetroArch, each executable is a separate libretro core instead of the core being separately loaded from a single executable. A pre-existing libretro library needs to be present in the root of the source directory in order to link RetroArch DOS. This file needs to be called 'libretro.a'.</p>
<h2 id="retroarch-compilation">RetroArch Compilation<a class="headerlink" href="#retroarch-compilation" title="Permanent link">¶</a></h2>
<h3 id="fetching-retroarch">Fetching RetroArch<a class="headerlink" href="#fetching-retroarch" title="Permanent link">¶</a></h3>
<p>Clone RetroArch's repository from <a href="https://github.com/libretro/RetroArch">GitHub</a></p>
<pre><code>git clone https://github.com/libretro/RetroArch.git retroarch
cd retroarch
</code></pre>
<p>For subsequent builds you only need to pull the changes from the repo</p>
<pre><code>cd retroarch
git pull
</code></pre>
<h3 id="building-retroarch">Building RetroArch<a class="headerlink" href="#building-retroarch" title="Permanent link">¶</a></h3>
<p>To compile RetroArch run the following commands inside RetroArch's source tree:</p>
<pre><code>CROSS_COMPILE=i686-pc-msdosdjgpp- ./configure --with-libretro="-L. -lretro"
make clean
make -j4
</code></pre>
<p>Replace the value of <code>CROSS_COMPILE</code> with the prefix of your specific toolchain if necessary.</p>
<p>Once finished, you should find <code>retroarch.exe</code> in the current directory, this is the final binary you can run inside DOS. Since older DOS versions do not support long filenames, you may want to rename this file to something shorter.</p>
<p>RetroArch for DOS also requires the CWSDPMI server application from the DJGPP distribution, which can be downloaded separately <a href="http://www.delorie.com/pub/djgpp/current/v2misc/csdpmi7b.zip">here</a>. On the target system, CWSDPMI.EXE will need to be placed in the same directory as your RetroArch executable for it to run properly.</p>
<p>Once you have the DPMI program in place, simply run your RetroArch executable and the DPMI server will be loaded automatically at startup.</p>
<p>It is also possible to include the DPMI server inside the main RetroArch executable so that only a single file is needed, but that is outside the scope of this document. See <a href="http://www.delorie.com/djgpp/doc/utils/utils_16.html">here</a> for more information.</p>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
          
            
  <p class="logo">
    <a href="../../../..">
      <img class="logo" src="../../../../logo.png" title="Alabaster">
    </a>
  </p>
  



          
            



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
      <li><a href="#environment-configuration">Environment configuration</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#core-support">Core Support</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#retroarch-compilation">RetroArch Compilation</a></li>
      <ul>
    
      <li><a href="#fetching-retroarch">Fetching RetroArch</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#building-retroarch">Building RetroArch</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
  </ul>
  

  
    <hr>
    <ul>
      
        <li class="toctree-l1"><a href="https://github.com/notpushkin/mkdocs-alabaster">Fork me on GitHub</a></li>
      
    </ul>
  
</nav>
          
            
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../windowsNT351-msvc-cmdline/" title="previous chapter">
        MSVC Commandline
      </a></li>
    
    
      <li>Next: <a href="../3ds/" title="next chapter">
        Nintendo 3DS
      </a></li>
    
  </ul>

          
            <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../../../../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
          
        
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
        &copy; 2019 Alexander Pushkov
      
      
        |
        Powered by <a href="http://www.mkdocs.org">mkdocs 1.1</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">mkdocs-alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 1.1
  Docs Build Date UTC : 2020-05-14 06:50:09
  -->
</body>
</html>