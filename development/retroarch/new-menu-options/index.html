
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Adding Menu Entries &mdash; Alabaster</title>

    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <link rel="stylesheet" href="../../../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../../../css/alabaster-overrides.css" type="text/css">

    

    
      <script src="../../../search/main.js"></script>
    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <h1 id="adding-a-retroarch-menu-option">Adding a RetroArch menu option<a class="headerlink" href="#adding-a-retroarch-menu-option" title="Permanent link">¶</a></h1>
<h2 id="files-you-need-to-change">Files you need to change<a class="headerlink" href="#files-you-need-to-change" title="Permanent link">¶</a></h2>
<p>msg_hash_us.c<br />
msg_hash_us.h<br />
msg_hash_**.c (If you speak more than one language)<br />
msg_hash_**.h (If you speak more than one language)<br />
msg_hash_lbl.h<br />
msg_hash.h<br />
menu_cbs_sublabel.c<br />
menu_setting.c<br />
menu_displaylist.c<br />
configuration.c<br />
configuration.h<br />
config.def.h</p>
<h2 id="creating-the-menu-variable">Creating the menu variable<a class="headerlink" href="#creating-the-menu-variable" title="Permanent link">¶</a></h2>
<p>For this example the variable will be an int named test_menu_option.</p>
<ol>
<li>Open config.def.h</li>
<li>Add <code>static const int test_menu_option = 0;</code> the 0 can be any number, this is just the default value, the user will change it later.</li>
<li>Open configuration.h</li>
<li>There are sections for each variable type(string, float, int, uint and bool) go to "ints" and add <code>int test_menu_option;</code></li>
<li>Open configuration.c</li>
<li>Add <code>SETTING_INT("test_menu_option",    &amp;settings-&gt;ints.test_menu_option, true, test_menu_option, false);</code> to populate_settings_int.</li>
</ol>
<p>The variable is now setup but the menu still doesnt know it exists.</p>
<h2 id="making-the-menu-read-the-variable">Making the menu read the variable<a class="headerlink" href="#making-the-menu-read-the-variable" title="Permanent link">¶</a></h2>
<p>The variables name must now be configured</p>
<ol>
<li>Open msg_hash.h</li>
<li>Add <code>MENU_LABEL(TEST_MENU_OPTION)</code> to <code>enum msg_hash_enums</code></li>
<li>Open intl/msg_hash_lbl.h</li>
<li>Add <code>MSG_HASH(MENU_ENUM_LABEL_TEST_MENU_OPTION, "test_menu_option")</code> in the <code>MENU_ENUM_LABEL_</code> section this is how RetroArch identifies the option.</li>
<li>Open intl/msg_hash_us.h</li>
<li>Add <code>MSG_HASH(MENU_ENUM_LABEL_VALUE_TEST_MENU_OPTION, "Test Menu Option")</code>  in the <code>MENU_ENUM_LABEL_VALUE_</code> section this is what the user actually sees.</li>
<li>Add <code>MSG_HASH(MENU_ENUM_SUBLABEL_TEST_MENU_OPTION, "Unused Text")</code> in the <code>MENU_ENUM_SUBLABEL_</code> section, sublabels are only used by xmb and glui, they are unused by rgui.</li>
<li>Open intl/msg_hash_us.c</li>
<li>Add <code>case MENU_ENUM_LABEL_TEST_MENU_OPTION: snprintf(s, len, "Help text"); break;</code> to <code>menu_hash_get_help_us_enum</code> this is the variable info that is shown when you push rshift.</li>
</ol>
<p>The option is now defined but the menu has still not been told to display it.</p>
<h2 id="displaying-your-option">Displaying your option<a class="headerlink" href="#displaying-your-option" title="Permanent link">¶</a></h2>
<p>Now the menu has to be told how to display the option.</p>
<ol>
<li>Open menu/cbs/menu_cbs_sublabel.c</li>
<li>Add <code>default_sublabel_macro(action_bind_sublabel_test_menu_option, MENU_ENUM_SUBLABEL_TEST_MENU_OPTION)</code> to the block of <code>default_sublabel_macro</code> functions.</li>
<li>Add <code>case MENU_ENUM_LABEL_TEST_MENU_OPTION: BIND_ACTION_SUBLABEL(cbs, action_bind_sublabel_test_menu_option); break;</code> to the <code>menu_cbs_init_bind_sublabel</code> function.</li>
<li>Open menu/menu_setting.c</li>
<li>Find your variables section(saving, netplay, video, ...) and add <code>CONFIG_INT(list, list_info, &amp;settings-&gt;ints.test_menu_option, MENU_ENUM_LABEL_TEST_MENU_OPTION, MENU_ENUM_LABEL_VALUE_TEST_MENU_OPTION, test_menu_option, &amp;group_info, &amp;subgroup_info, parent_group, general_write_handler, general_read_handler);</code> the menu knows everything it needs now.</li>
<li>Open menu/menu_displaylist.c</li>
<li>Find your variables section and add <code>menu_displaylist_parse_settings_enum(menu, info, MENU_ENUM_LABEL_TEST_MENU_OPTION, PARSE_ONLY_INT, false);</code> the position of this command in the list is what determines the order of the menu entries, the first run is at the top of the list.</li>
</ol>
<h1 id="finishing">Finishing<a class="headerlink" href="#finishing" title="Permanent link">¶</a></h1>
<p>There may be slight differences between variable types but for the most part if you want a string or bool just swap where ever you saw int for string or bool.</p>
<p>The variables name always follows the same format just replace test_menu_option, TEST_MENU_OPTION and "Test Menu Option" with your variables actual name in the same format of uppercase, lowercase or string.</p>
<p>This guide only effects the menu variables and the english name, if you speak another language do what you did to intl/msg_hash_us.c/h to your language files as well.</p>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
          
            
  <p class="logo">
    <a href="../../..">
      <img class="logo" src="../../../logo.png" title="Alabaster">
    </a>
  </p>
  



          
            



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
      <li><a href="#files-you-need-to-change">Files you need to change</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#creating-the-menu-variable">Creating the menu variable</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#making-the-menu-read-the-variable">Making the menu read the variable</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#displaying-your-option">Displaying your option</a></li>
      <ul>
    
  </ul>
    
  </ul>
  
    <ul>
    
  </ul>
  

  
    <hr>
    <ul>
      
        <li class="toctree-l1"><a href="https://github.com/notpushkin/mkdocs-alabaster">Fork me on GitHub</a></li>
      
    </ul>
  
</nav>
          
            
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../debugging/" title="previous chapter">
        Debugging
      </a></li>
    
    
      <li>Next: <a href="../input/overlay/" title="next chapter">
        Input Overlays
      </a></li>
    
  </ul>

          
            <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../../../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
          
        
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
        &copy; 2019 Alexander Pushkov
      
      
        |
        Powered by <a href="http://www.mkdocs.org">mkdocs 1.1</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">mkdocs-alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 1.1
  Docs Build Date UTC : 2020-05-14 06:50:09
  -->
</body>
</html>