
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Input Overlays &mdash; Alabaster</title>

    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <link rel="stylesheet" href="../../../../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../../../../css/alabaster-overrides.css" type="text/css">

    

    
      <script src="../../../../search/main.js"></script>
    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <h1 id="overlays">Overlays<a class="headerlink" href="#overlays" title="Permanent link">¶</a></h1>
<p>RetroArch supports overlay images for use with hardware accelerated drivers. The purpose of this is to allow some kind of input interface that is mouse/touch oriented. The overlay images are displayed with transparency over the regular game image, and the 
user is able to trigger input by pressing on certain parts of the overlay.</p>
<p>Since the overlay is a series of images, the user should be able to fully configure the look and functionality of this overlay. This allows skinners and themers to go wild.</p>
<h3 id="libretro-overlay-repositories">Libretro overlay repositories<a class="headerlink" href="#libretro-overlay-repositories" title="Permanent link">¶</a></h3>
<p>The Libretro Organization hosts a repositories on Github that contains a compilation of overlays made with the Overlay Specification. </p>
<ul>
<li>Interactive overlays are managed within: https://github.com/libretro/common-overlays</li>
<li>Decorative border overlays are managed within: https://github.com/libretro/overlay-borders</li>
</ul>
<p><img alt="RetroArch dinothawr overlay example" src="https://wiki.libretro.com/images/5/5c/Retroarch-dinothawr-overlay.jpg" title="RetroArch dinothawr overlay example" /></p>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">¶</a></h2>
<p>The overlay is described in a config file (.cfg). The config file uses the same config 
file syntax as RetroArch itself.</p>
<p>The overlay system supports use of multiple overlays that can be switched out on the fly. 
Input is not only restricted to gamepad input, but can also work with any input that is 
bindable in RetroArch, e.g. save states, rewind, load state, etc.</p>
<p>The config file describes:</p>
<ul>
<li>Which full-screen overlay images to use (.png, .tga, etc).</li>
<li>The hitbox for each input event, i.e. "size" of the button.</li>
<li>Which image should be shown over the input descriptors individually (optional).</li>
<li>Where on the screen the entire overlay should be displayed.</li>
</ul>
<h2 id="overlay-images">Overlay images<a class="headerlink" href="#overlay-images" title="Permanent link">¶</a></h2>
<p>First we configure how many overlays we use. Every overlay can have one overlay which fills 
the entire rectangle (overlay%u_rect), but is optional. The full-rect overlay is supported 
for compatibility with older format. It is less flexible than per-button overlays and 
is discouraged.</p>
<pre><code>overlays = 2
overlay0_overlay = overlay_img0.png # Optional
overlay1_overlay = overlay_img1.png # Optional
</code></pre>
<p>The paths are relative to where the overlay config is loaded from. If the path is absolute, 
absolute paths will be used. On Unix-like systems ~/ is recognized as $HOME/.</p>
<h2 id="screen-placement">Screen placement<a class="headerlink" href="#screen-placement" title="Permanent link">¶</a></h2>
<p>By default, the overlay image will be stretched out to fill the whole game image. However, 
for some overlays, this is not practical.</p>
<p>It is possible to set the placement using for example:</p>
<pre><code>overlay0_rect = "0.2,0.3,0.5,0.4"
</code></pre>
<p>We assume that the game screen has normalized coordinates in X and Y that span from [0, 0] in 
the top-left corner to [1, 1] in the lower-right corner.</p>
<p>This will render the overlay to x = 0.2, y = 0.3 with size width = 0.5, height = 0.4. The 
default (stretch to full screen) could be described as such:</p>
<pre><code>overlay0_rect = "0.0,0.0,1.0,1.0"
</code></pre>
<h2 id="full-screen-vs-full-viewport-overlays">Full-screen vs. full-viewport overlays<a class="headerlink" href="#full-screen-vs-full-viewport-overlays" title="Permanent link">¶</a></h2>
<p>By default, overlays will be stretched out to fill game viewport. However, in some cases the 
aspect ratio of the game causes there to remain large black borders around the game image. </p>
<p>It is possible to stretch the overlay to full screen (instead of viewport) by specifying this option:</p>
<pre><code>overlay0_full_screen = true
</code></pre>
<h2 id="coordinate-descriptors">Coordinate descriptors<a class="headerlink" href="#coordinate-descriptors" title="Permanent link">¶</a></h2>
<p>We must also describe where on the overlay image buttons can be found for each overlay. E.g.:</p>
<pre><code>overlay0_descs = 3 # Three buttons for this overlay in total
overlay0_desc0 = "a,32,64,radial,10,20"
overlay0_desc1 = "start,100,50,rect,80,10"
overlay0_desc2 = "overlay_next,200,180,radial,40,40"
</code></pre>
<p>The format is:</p>
<pre><code>"button,position_x,position_y,hitbox_type,range_x,range_y"
</code></pre>
<p>button corresponds to the input event being generated. The names are the same as in the 
general input config, e.g. input_player1_start would translate to start here. overlay_next is a 
special bind designed to swap to the next overlay, or wrap around to the first one. 
Button nul means no input.</p>
<p>For an up-to-date view of what buttons are called, check the input_config_key_map variable in: 
<a href="https://github.com/libretro/RetroArch/blob/master/input/input_keymaps.c">https://github.com/libretro/RetroArch/blob/master/input/input_keymaps.c</a>.</p>
<p>position_x and position_y are the x and y coordinates in pixels of the source image for the 
center of the button. It is possible to use normalized coordinates as well. This is necessary 
when a full-screen overlay is not used. overlay0_desc0_normalized = true will force normalized 
coordinates. overlay0_normalized = true sets all descriptors to true unless overridden specifically.</p>
<p>hitbox_type describes which type of shape the button has. radial (circle, ellipsis) and 
rect (rectangular) shapes are supported.</p>
<p>range_x and range_y describe the size of the button. The semantics differ slightly for radial 
and rect hitbox types. For radial shape, range_x and range_y describe the radius in x and y 
directions in pixels of the source image. For rect shape, the range_x and range_y values represent 
the distance from center to the edge of the rect in terms of pixels of the source image. </p>
<p>E.g. a range_x of 20 would mean the width of the rectangular is 40 pixels in total.</p>
<p>A special type of button is analog_left and analog_right. These translate to analog sticks. 
These buttons must have hitbox type radial. It is possible to configure where saturation kicks in 
using overlay%u_desc%u_saturate_pct. E.g. a value of 0.75 means the 75% inner part contains the 
entire analog range. Outside the 75% it will be fully saturated.</p>
<h2 id="using-per-button-overlays">Using per-button overlays<a class="headerlink" href="#using-per-button-overlays" title="Permanent link">¶</a></h2>
<p>It is possible to use individual overlays per button. The given image will be displayed with 
same size as the hitbox in the input descriptor.</p>
<pre><code>overlay0_desc0_overlay = button.png
</code></pre>
<h2 id="let-overlay-buttons-move-around-when-pressed">Let overlay buttons move around when pressed<a class="headerlink" href="#let-overlay-buttons-move-around-when-pressed" title="Permanent link">¶</a></h2>
<p>For especially overlay buttons which map to analogs, it is useful to allow an image to follow 
the movement of the finger. To enable an overlay to follow the finger movement within its 
bounding area use the movable attribute:</p>
<pre><code>overlay0_desc0_overlay = analog.png # Need some per-descriptor overlay
overlay0_desc0_movable = true # Overlay image will now move around
</code></pre>
<h2 id="let-buttons-light-up-when-they-are-pressed">Let buttons light up when they are pressed<a class="headerlink" href="#let-buttons-light-up-when-they-are-pressed" title="Permanent link">¶</a></h2>
<p>When using individial overlays per button it will make sense to have buttons light up 
when they are pressed. To do this, the alpha value per-button will be multiplied by a factor.</p>
<pre><code>overlay0_desc0_alpha_mod = 2.0 # Alpha is multiplied 2x when pressed.
</code></pre>
<p>To set a default across all descriptors for an overlay, you can do so:</p>
<pre><code>overlay0_alpha_mod = 2.0
</code></pre>
<h2 id="let-buttons-have-bigger-hitbox-when-they-are-pressed">Let buttons have bigger hitbox when they are pressed<a class="headerlink" href="#let-buttons-have-bigger-hitbox-when-they-are-pressed" title="Permanent link">¶</a></h2>
<p>When pressed, you can make the hitboxes larger while the button is pressed:</p>
<pre><code>overlay0_desc0_range_mod = 1.5 # For the particular descriptor
overlay0_range_mod = 1.5 # Default for all descriptors
</code></pre>
<h2 id="triggering-multiple-buttons-with-one-desc">Triggering multiple buttons with one desc<a class="headerlink" href="#triggering-multiple-buttons-with-one-desc" title="Permanent link">¶</a></h2>
<p>It's possible to trigger multiple buttons (e.g. diagonals) with one overlay desc.</p>
<pre><code>overlay0_desc0 = "left|up,32,64,radial,10,20"
</code></pre>
<p>will trigger both left and up at same time.</p>
<h2 id="go-to-arbitrary-overlay-index">Go to arbitrary overlay index<a class="headerlink" href="#go-to-arbitrary-overlay-index" title="Permanent link">¶</a></h2>
<p>To build some kind of menu system, one would need the ability for overlay_next to 
refer to any overlay. To do this, two extra things must be configured:</p>
<pre><code>overlay2_overlay = "some_overlay.png"
overlay2_name = "overview_overlay" # A name which can be referred to. Must be set if it is to be refered to.

overlay0_desc0 = "overlay_next,200,180,radial,40,40"
overlay0_desc0_next_target = "overview_overlay" # When this overlay_next is pressed, it will go to index 2 directly, instead of the default 1.
</code></pre>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
          
            
  <p class="logo">
    <a href="../../../..">
      <img class="logo" src="../../../../logo.png" title="Alabaster">
    </a>
  </p>
  



          
            



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
      <li><a href="#libretro-overlay-repositories">Libretro overlay repositories</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#configuration">Configuration</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#overlay-images">Overlay images</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#screen-placement">Screen placement</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#full-screen-vs-full-viewport-overlays">Full-screen vs. full-viewport overlays</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#coordinate-descriptors">Coordinate descriptors</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#using-per-button-overlays">Using per-button overlays</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#let-overlay-buttons-move-around-when-pressed">Let overlay buttons move around when pressed</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#let-buttons-light-up-when-they-are-pressed">Let buttons light up when they are pressed</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#let-buttons-have-bigger-hitbox-when-they-are-pressed">Let buttons have bigger hitbox when they are pressed</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#triggering-multiple-buttons-with-one-desc">Triggering multiple buttons with one desc</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#go-to-arbitrary-overlay-index">Go to arbitrary overlay index</a></li>
      <ul>
    
  </ul>
    
  </ul>
  

  
    <hr>
    <ul>
      
        <li class="toctree-l1"><a href="https://github.com/notpushkin/mkdocs-alabaster">Fork me on GitHub</a></li>
      
    </ul>
  
</nav>
          
            
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../../new-menu-options/" title="previous chapter">
        Adding Menu Entries
      </a></li>
    
    
      <li>Next: <a href="../parallel-port-joypads/" title="next chapter">
        Parallel Port Joypads
      </a></li>
    
  </ul>

          
            <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../../../../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
          
        
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
        &copy; 2019 Alexander Pushkov
      
      
        |
        Powered by <a href="http://www.mkdocs.org">mkdocs 1.1</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">mkdocs-alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 1.1
  Docs Build Date UTC : 2020-05-14 06:50:09
  -->
</body>
</html>