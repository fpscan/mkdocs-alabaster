
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Adding Translations &mdash; Alabaster</title>

    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <link rel="stylesheet" href="../../../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../../../css/alabaster-overrides.css" type="text/css">

    

    
      <script src="../../../search/main.js"></script>
    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <h1 id="adding-a-translation-to-a-new-language">Adding a translation to a new language<a class="headerlink" href="#adding-a-translation-to-a-new-language" title="Permanent link">¶</a></h1>
<h2 id="files-you-need-to-change">Files you need to change<a class="headerlink" href="#files-you-need-to-change" title="Permanent link">¶</a></h2>
<ul>
<li><code>libretro-common/include/libretro.h</code></li>
<li><code>msg_hash.h</code></li>
<li><code>msg_hash.c</code></li>
<li><code>Makefile.common</code></li>
<li><code>intl/msg_hash_xx.c</code> (new file)</li>
<li><code>intl/msg_hash_xx.h</code> (new file)</li>
<li><code>intl/msg_hash_us.h</code></li>
<li><code>menu/menu_setting.c</code></li>
<li><code>griffin/griffin.c</code></li>
</ul>
<h2 id="instructions">Instructions<a class="headerlink" href="#instructions" title="Permanent link">¶</a></h2>
<ol>
<li>Open <code>libretro-common/include/libretro.h</code></li>
<li>Add a <code>RETRO_LANGUAGE_XXXXX</code> item to the <code>retro_language</code> enum just above <code>RETRO_LANGUAGE_LAST</code>, using the next available integer value</li>
<li>Open <code>msg_hash.h</code></li>
<li>Add a <code>MENU_ENUM_LABEL_VALUE_LANG_XXXXX</code> item to the <code>msg_hash_enums</code> enum</li>
<li>Add declaration of a <code>const char *msg_hash_to_str_xx(enum msg_hash_enums msg)</code> function</li>
<li>Add declaration of a <code>int menu_hash_get_help_xx_enum(enum msg_hash_enums msg, char *s, size_t len)</code> function</li>
<li>Open <code>msg_hash.c</code></li>
<li>Add a
     <code>c
     case RETRO_LANGUAGE_XXXXX:
         ret = menu_hash_get_help_xx_enum(msg, s, len);
         break;</code>
   block inside the <code>menu_hash_get_help_enum()</code> function</li>
<li>Add a
     <code>c
     case RETRO_LANGUAGE_XXXXX:
         ret = msg_hash_to_str_xx(msg);
         break;</code>
   block inside the <code>msg_hash_to_str()</code> function</li>
<li>Open <code>Makefile.common</code></li>
<li>Add <code>intl/msg_hash_xx.o</code> to <code>OBJS</code></li>
<li>Copy <code>intl/msg_hash_us.c</code> to <code>intl/msg_hash_xx.c</code></li>
<li>Decide if <code>intl/msg_hash_xx.c</code> should use UTF-8 + BOM encoding. See the section below</li>
<li>Open <code>intl/msg_hash_xx.c</code></li>
<li>Rename the <code>menu_hash_get_help_us_enum()</code> function to <code>menu_hash_get_help_xx_enum()</code></li>
<li>Rename the <code>menu_hash_to_str_us_label_enum()</code> function to <code>menu_hash_to_str_xx_label_enum()</code></li>
<li>Rename the <code>menu_hash_to_str_us()</code> function to <code>msg_hash_to_str_xx()</code> and, inside that same function:<ul>
<li>Replace the call to <code>menu_hash_to_str_us_label_enum()</code> with a call to <code>menu_hash_to_str_xx_label_enum()</code></li>
<li>Replace the <code>#include "msg_hash_us.h"</code> line with #include "msg_hash_xx.h"</li>
</ul>
</li>
<li>Open <code>intl/msg_hash_us.h</code></li>
<li>Add a
     <code>c
     MSG_HASH(MENU_ENUM_LABEL_VALUE_LANG_XXXXX, "Xxxxx")</code>
    block with the name of the new language written in English</li>
<li>Copy <code>intl/msg_hash_us.h</code> to <code>intl/msg_hash_xx.h</code></li>
<li>Decide if <code>intl/msg_hash_xx.h</code> should use UTF-8 + BOM encoding. See the section below</li>
<li>Open <code>intl/msg_hash_xx.h</code></li>
<li>Make sure to modify the
     <code>c
     MSG_HASH(MENU_ENUM_LABEL_VALUE_LANG_XXXXX, "Xxxxx")</code>
    block to show the name of the new language written <em>in</em> the target language</li>
<li>Open <code>menu/menu_setting.c</code></li>
<li>Add a
     <code>c
     modes[RETRO_LANGUAGE_XXXXX] = msg_hash_to_str(MENU_ENUM_LABEL_VALUE_LANG_XXXXX);</code>
    assignment to the <code>setting_get_string_representation_uint_user_language()</code> function</li>
<li>Open <code>griffin/griffin.c</code></li>
<li>Add a <code>#include "../intl/msg_hash_xx.c"</code> line below the existing, similar
    ones for other languages.</li>
</ol>
<h3 id="encoding-of-translation-files">Encoding of translation files<a class="headerlink" href="#encoding-of-translation-files" title="Permanent link">¶</a></h3>
<ul>
<li>Translation files (<code>intl/msg_hash_xx.{c,h}</code>) in general must be UTF-8 encoded</li>
<li>
<p>For some languages, these files need to have a "UTF-8 Unicode (with BOM)"
  encoding, this is, UTF-8 and a
  <a href="https://en.wikipedia.org/wiki/Byte_order_mark">BOM</a>. AFAIK this is so
  because a requirement of the MSVC compilers (Windows platform). Examples of
  this as of now are:</p>
<ul>
<li><code>msg_hash_ar.{c,h}</code></li>
<li><code>msg_hash_chs.{c,h}</code></li>
<li><code>msg_hash_cht.{c,h}</code></li>
<li><code>msg_hash_ja.{c,h}</code></li>
<li><code>msg_hash_ko.{c,h}</code></li>
<li><code>msg_hash_pl.{c,h}</code></li>
<li><code>msg_hash_ru.{c,h}</code></li>
<li><code>msg_hash_vn.h</code></li>
</ul>
</li>
<li>
<p>Be careful when creating and editing your new translation files as some text
  editors do strip the BOM without warning.</p>
</li>
</ul>
<h3 id="translation">Translation<a class="headerlink" href="#translation" title="Permanent link">¶</a></h3>
<p>If you speak the target language xx then you could start translating literals in</p>
<ul>
<li><code>intl/msg_hash_xx.c</code></li>
<li><code>intl/msg_hash_xx.h</code></li>
</ul>
<p>by replacing the English original ones with its translations.</p>
<h3 id="example-addition-of-arabic-language">Example: Addition of Arabic language:<a class="headerlink" href="#example-addition-of-arabic-language" title="Permanent link">¶</a></h3>
<ul>
<li>Commit <a href="https://github.com/libretro/RetroArch/commit/45580cb9a8f0fcd0a87f00eadf26d87f05289485">45580cb</a></li>
<li>Commit <a href="https://github.com/libretro/RetroArch/commit/d8f1a08a4758851d5530d311303146257cbf8216">d8f1a08</a></li>
<li>Commit <a href="https://github.com/libretro/RetroArch/commit/7a0428fc769fd0eca663207134bec311aa3e30f3">7a0428f</a></li>
</ul>
<h2 id="see-also">See also<a class="headerlink" href="#see-also" title="Permanent link">¶</a></h2>
<ul>
<li><a href="../new-menu-options/">Adding a RetroArch menu option</a></li>
</ul>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
          
            
  <p class="logo">
    <a href="../../..">
      <img class="logo" src="../../../logo.png" title="Alabaster">
    </a>
  </p>
  



          
            



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
      <li><a href="#files-you-need-to-change">Files you need to change</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#instructions">Instructions</a></li>
      <ul>
    
      <li><a href="#encoding-of-translation-files">Encoding of translation files</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#translation">Translation</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#example-addition-of-arabic-language">Example: Addition of Arabic language:</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
      <li><a href="#see-also">See also</a></li>
      <ul>
    
  </ul>
    
  </ul>
  

  
    <hr>
    <ul>
      
        <li class="toctree-l1"><a href="https://github.com/notpushkin/mkdocs-alabaster">Fork me on GitHub</a></li>
      
    </ul>
  
</nav>
          
            
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../input/parallel-port-joypads/" title="previous chapter">
        Parallel Port Joypads
      </a></li>
    
    
      <li>Next: <a href="../netplay/" title="next chapter">
        Netplay
      </a></li>
    
  </ul>

          
            <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../../../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
          
        
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
        &copy; 2019 Alexander Pushkov
      
      
        |
        Powered by <a href="http://www.mkdocs.org">mkdocs 1.1</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">mkdocs-alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 1.1
  Docs Build Date UTC : 2020-05-14 06:50:09
  -->
</body>
</html>